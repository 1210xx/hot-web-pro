<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>验证码生成</title>
</head>
<body>
<canvas id="captchaCanvas" width="200" height="80"></canvas>
<button onclick="generateCaptcha()">生成验证码</button>

<script>
function generateCaptcha() {
const canvas = document.getElementById('captchaCanvas');
const ctx = canvas.getContext('2d');

// 清空画布
ctx.clearRect(0, 0, canvas.width, canvas.height);

// 设置背景色
ctx.fillStyle = '#F5F5F5';
ctx.fillRect(0, 0, canvas.width, canvas.height);

// 生成随机验证码字符串
const captchaText = generateRandomString(6);
ctx.font = '30px Arial';
ctx.fillStyle = '#333';
ctx.fillText(captchaText, 50, 50);

// 添加干扰线条
for (let i = 0; i < 5; i++) {
ctx.strokeStyle = getRandomColor();
ctx.beginPath();
ctx.moveTo(Math.random() * canvas.width, Math.random() * canvas.height);
ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);
ctx.stroke();
}

// 添加噪点
for (let i = 0; i < 30; i++) {
ctx.fillStyle = getRandomColor();
ctx.beginPath();
ctx.arc(Math.random() * canvas.width, Math.random() * canvas.height, 1, 0, Math.PI * 2);
ctx.fill();
}
}

function generateRandomString(length) {
const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
let result = '';
for (let i = 0; i < length; i++) {
result += chars.charAt(Math.floor(Math.random() * chars.length));
}
return result;
}

function getRandomColor() {
const letters = '0123456789ABCDEF';
let color = '#';
for (let i = 0; i < 6; i++) {
color += letters[Math.floor(Math.random() * 16)];
}
return color;
}
</script>
</body>
</html>